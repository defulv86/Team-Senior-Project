<!DOCTYPE html>
<html lang="en">

<head>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/testpage.css' %}">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400&family=Montserrat:wght@700&display=swap"
    rel="stylesheet">
    <title> Test Page</title>
</head>

<body>
    <h3 id="title">Online Philadelphia Pointing Span Test</h3><br><br>
    <h2 id="Welcome">Welcome to your Philadelphia Pointing Span Test.</h2><br><br>
    <p id="demo_vid"></p>
    <p id="submit_p"></p>

    <div class="center" id="test" style="display: none;">
        <p></p> <br><br><br>
    </div>

    <div class="center" id="playDemo">
        <button onclick="playDemo()">Play Demo</button>
    </div>

    <div class="center" id="d12t4" style="display: none;">
        <button class="testButton" , onclick="choice">1</button>
        <button class="testButton" , onclick="choice">2</button>
        <button class="testButton" , onclick="choice">3</button>
        <button class="testButton" , onclick="choice">4</button>
        <button class="testButton" , onclick="choice">5</button>
        <button class="testButton" , onclick="choice">6</button>
        <button class="testButton" , onclick="choice">7</button>
        <button class="testButton" , onclick="choice">8</button>
    </div>
    <div class="center" id="t25" style="display: none;">
        <button class="testButton" , onclick="choice">3</button>
        <button class="testButton" , onclick="choice">4</button>
        <button class="testButton" , onclick="choice">5</button>
        <button class="testButton" , onclick="choice">6</button>
        <button class="testButton" , onclick="choice">7</button>
        <button class="testButton" , onclick="choice">8</button>
        <button class="testButton" , onclick="choice">9</button>
        <button class="testButton" , onclick="choice">0</button>
    </div>
    <div class="center" id="t136" style="display: none;">
        <button class="testButton" , onclick="choice">1</button>
        <button class="testButton" , onclick="choice">2</button>
        <button class="testButton" , onclick="choice">3</button>
        <button class="testButton" , onclick="choice">4</button>
        <button class="testButton" , onclick="choice">5</button>
        <button class="testButton" , onclick="choice">8</button>
        <button class="testButton" , onclick="choice">9</button>
        <button class="testButton" , onclick="choice">0</button>
    </div>
    <div class="center" id="dem3" style="display: none;">
        <button class="testButton" , onclick="choice">3</button>
        <button class="testButton" , onclick="choice">4</button>
        <button class="testButton" , onclick="choice">5</button>
        <button class="testButton" , onclick="choice">6</button>
        <button class="testButton" , onclick="choice">D</button>
        <button class="testButton" , onclick="choice">E</button>
        <button class="testButton" , onclick="choice">T</button>
        <button class="testButton" , onclick="choice">U</button>
    </div>
    <div class="center" id="dem4" style="display: none;">
        <button class="testButton" , onclick="choice">3</button>
        <button class="testButton" , onclick="choice">4</button>
        <button class="testButton" , onclick="choice">6</button>
        <button class="testButton" , onclick="choice">7</button>
        <button class="testButton" , onclick="choice">A</button>
        <button class="testButton" , onclick="choice">C</button>
        <button class="testButton" , onclick="choice">H</button>
        <button class="testButton" , onclick="choice">J</button>
    </div>
    <div class="center" id="t7" style="display: none;">
        <button class="testButton" , onclick="choice">4</button>
        <button class="testButton" , onclick="choice">6</button>
        <button class="testButton" , onclick="choice">8</button>
        <button class="testButton" , onclick="choice">9</button>
        <button class="testButton" , onclick="choice">I</button>
        <button class="testButton" , onclick="choice">J</button>
        <button class="testButton" , onclick="choice">K</button>
        <button class="testButton" , onclick="choice">L</button>
    </div>
    <div class="center" id="t8" style="display: none;">
        <button class="testButton" , onclick="choice">3</button>
        <button class="testButton" , onclick="choice">6</button>
        <button class="testButton" , onclick="choice">7</button>
        <button class="testButton" , onclick="choice">0</button>
        <button class="testButton" , onclick="choice">S</button>
        <button class="testButton" , onclick="choice">T</button>
        <button class="testButton" , onclick="choice">U</button>
        <button class="testButton" , onclick="choice">V</button>
    </div>
    <div class="center" id="t9" style="display: none;">
        <button class="testButton" , onclick="choice">2</button>
        <button class="testButton" , onclick="choice">3</button>
        <button class="testButton" , onclick="choice">4</button>
        <button class="testButton" , onclick="choice">0</button>
        <button class="testButton" , onclick="choice">D</button>
        <button class="testButton" , onclick="choice">E</button>
        <button class="testButton" , onclick="choice">Q</button>
        <button class="testButton" , onclick="choice">R</button>
    </div>
    <div class="center" id="t10" style="display: none;">
        <button class="testButton" , onclick="choice">3</button>
        <button class="testButton" , onclick="choice">6</button>
        <button class="testButton" , onclick="choice">9</button>
        <button class="testButton" , onclick="choice">0</button>
        <button class="testButton" , onclick="choice">A</button>
        <button class="testButton" , onclick="choice">C</button>
        <button class="testButton" , onclick="choice">E</button>
        <button class="testButton" , onclick="choice">F</button>
    </div>
    <div class="center" id="t11" style="display: none;">
        <button class="testButton" , onclick="choice">2</button>
        <button class="testButton" , onclick="choice">4</button>
        <button class="testButton" , onclick="choice">6</button>
        <button class="testButton" , onclick="choice">8</button>
        <button class="testButton" , onclick="choice">A</button>
        <button class="testButton" , onclick="choice">H</button>
        <button class="testButton" , onclick="choice">X</button>
        <button class="testButton" , onclick="choice">Y</button>
    </div>
    <div class="center" id="t12" style="display: none;">
        <button class="testButton" , onclick="choice">5</button>
        <button class="testButton" , onclick="choice">6</button>
        <button class="testButton" , onclick="choice">7</button>
        <button class="testButton" , onclick="choice">8</button>
        <button class="testButton" , onclick="choice">L</button>
        <button class="testButton" , onclick="choice">N</button>
        <button class="testButton" , onclick="choice">P</button>
        <button class="testButton" , onclick="choice">R</button>
    </div>

    <div class="center" id="demoTest1" style="display: none;">
        <button onclick="demoTest1()">Demo Test 1</button>
    </div>

    <div class="center" id="demoTest2" style="display: none;">
        <button onclick="demoTest2()">Demo Test 2</button>
    </div>

    <div class="center" id="takeTest" style="display: none;">
        <button onclick="takeTest()">Take the test</button>
    </div>

    <div class="center" id="submit" style="display: none;">
        <button onclick="submit()">Submit</button>
    </div>
    <script>
        function speak(text) { //allows  text to be spoken
            var utterance = new SpeechSynthesisUtterance(text);
            window.speechSynthesis.speak(utterance);
        }
        function playDemo() { // shows  demo video and speaks/ shows instructions
            var video = document.createElement("VIDEO");
            video.width = 420;
            video.height = 300;
            video.controls = true;
            video.src = "{% static 'images/PPSTTestIntoVid.mp4' %}";
            document.getElementById("demo_vid").appendChild(video); // shows video
            var titleText = document.getElementById("title").textContent;
            var welcomeText = document.getElementById("Welcome").textContent;
            speak(titleText);
            speak(welcomeText);
            var paragraph = document.createElement("P");
            paragraph.textContent = "This is a demo video for the Philadelphia Pointing Span Test. Once you are prepared to proceed, click the button below to take the two demo test. Then you will be prompted to take the actual test.";
            paragraph.style.fontSize = "25px";
            paragraph.style.color =  "#0077b3";
            paragraph.style.fontFamily = "Open Sans";
            paragraph.style.fontWeight = "bold";
            paragraph.classList.add("centered-text");
            document.getElementById("demo_vid").appendChild(paragraph);
            speak(paragraph.textContent);
            document.getElementById("playDemo").style.display = "none"; // Hides button
            document.getElementById("demoTest1").style.display = "block"; // shows demo1 video
        }
        function demoTest1() {
            // show demo test1
            document.getElementById("demo_vid").style.display = "none";
            document.getElementById("test").style.display = "block";
            displayTest(demosTest1);
            //show buttons
            document.getElementById("d12t4").style.display = "block"; // if else buttons for each test
            document.getElementById("demoTest1").style.display = "none"; // change to demoTest
            document.getElementById("demoTest2").style.display = "block"; // change to demoTest
        }
        function demoTest2() {
            // show demo test
            document.getElementById("d12t4").style.display = "none";
            document.getElementById("test").style.display = "block";
            displayTest(demosTest2)
            document.getElementById("d12t4").style.display = "block"; // if else buttons for each test
            
            //show take test
            document.getElementById("demoTest2").style.display = "none"; // change to demoTest
            document.getElementById("takeTest").style.display = "block"; // change to demoTest

        }
        function takeTest() { // sends user to test page and hides video/demo button 
            document.getElementById("d12t4").style.display = "none"; // if else buttons for each test
            document.getElementById("takeTest").style.display = "none";
            document.getElementById("demoTest2").style.display = "none";
            document.getElementById("test").style.display = "block";
            //display specific test
            displayTest(test1);
            // display corresponding buttons
            document.getElementById("t136").style.display = "block"; // if else buttons for each test
            document.getElementById("submit").style.display = "block";
        }
        function submit() { // sends user to submission page and hides submit button
            var paragraph = document.createElement("P");
            paragraph.textContent = "You have successfully completed your Philadelphia Pointing Span Test. Your health provider has been notified of your unpdated test status. The results will be available to for your health provider's review for further medical evaluation. You may now exit this screen.";
            paragraph.style.fontSize = "30px";
            paragraph.style.color =  "black";
            paragraph.style.fontFamily = "Open Sans";
            paragraph.classList.add("centered-text");
            document.getElementById("submit_p").appendChild(paragraph);
            speak(paragraph.textContent);
            // remove any and all buttons
            document.getElementById("t136").style.display =  "none";
            document.getElementById("submit").style.display = "none";
            document.getElementById("test").style.display = "none";
            // send data to DB -> DB() 
        }
        
        function choice() { //takes selected num/let and adds to answer when submitted

        }
        function DB() {//send data to DB

        }

        let currentIndex = 0;
        function displayTest(testString) {
            const testDiv = document.getElementById("test");
            testDiv.innerHTML = "";
            currentIndex = 0;

            const interval = setInterval(() => {
                if (currentIndex < testString.length) {
                    const letter = document.createElement("span");
                    letter.textContent = testString[currentIndex];
                    letter.style.fontSize = "90px"; //font size 
                    testDiv.appendChild(letter);
                    speak(testString[currentIndex]);  //speak the letter or number

                    setTimeout(() => {
                        testDiv.removeChild(letter);
                    }, 1000);

                    currentIndex++;
                } else {
                    clearInterval(interval);
                }
            }, 2000); //slow or speed test up /down
        }

        const demosTest1 = "6254";  // demo1
        const demosTest2 = "46723"; // demo2
        const demosTest3 = "6E5T";  // demo3 mixed
        const demosTest4 = "4H7A3"; // demo4 mixed
        const test1 = "89512"; // Num test 1 5 digit
        const test2 = "73406"; // Num test 2 5 digit
        const test3 = "95231"; // Num test 3 5 digit
        const test4 = "2463";  // Num test 1 4 digit
        const test5 = "9067";  // Num test 2 4 digit
        const test6 = "8105";  // Num test 3 4 digit
        const test7 = "946KJ"; // Mix test 1 5 digit
        const test8 = "S370V"; // Mix test 2 5 digit
        const test9 = "30RE4"; // Mix test 3 5 digit
        const test10 = "6F9A"; // Mix test 1 4 digit
        const test11 = "HY42"; // Mix test 2 4 digit
        const test12 = "P5L8"; // Mix test 3 4 digit
        //answers 
        
    </script>
</body>

</html>